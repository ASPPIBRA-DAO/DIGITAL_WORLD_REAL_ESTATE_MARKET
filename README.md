# Mundo Digital Real Estate Marketplace üåê üè°

![ASPPIBRA ESCRITURA](https://raw.githubusercontent.com/ASPPIBRA-DAO/Imagens/890ffa9bfb4c79f650c48e627aa2306299c17c4b/Jornal/ASPPIBRA-ESCRITURA.svg)

## √çndice üìë

1. [**Introdu√ß√£o**](#introdu√ß√£o)
2. [**Requisitos**](#requisitos)
3. [**Recursos Principais**](#recursos-principais)
4. [**Uso**](#uso)
5. [**Modelo**](https://github.com/ASPPIBRA-DAO/WEBINAR/tree/main/Modelo%20de%20Escritura)
6. [**Contribui√ß√µes**](#contribui√ß√µes)
7. [**Licen√ßa**](https://github.com/ASPPIBRA-DAO/DIGITAL_WORLD_REAL_ESTATE_MARKET/blob/a145c7c2e2a1fa311bb814ed8ed9b1819a20631d/LICENSE.md)

## Introduction üöÄ

The Mundo Digital Real Estate Marketplace aims to drive digital inclusion through the digitization of real estate records, enabling international transactions in the real estate sector. The digitization process is semi-automated, enabling users of the Mundo Digital application to acquire their digital version of the real estate record.

## Requirements üìã

To run the smart contract, you must have the following:

- A Web3 wallet üíº
- Gas tokens to pay network fees ‚õΩ

### Requirements for scanning real estate records üè°

In addition to the requirements outlined in the "Requirements" section of this README, the real estate records digitization process also requires the collection of the following information and documents:


| Categoria                       | Documento                                             | Descri√ß√£o                                                                         |
|---------------------------------|-------------------------------------------------------|-----------------------------------------------------------------------------------|
| **Informa√ß√µes pessoais:**      | Nome completo                                         | Nome completo do propriet√°rio                                                    |
|                                 | Data de nascimento                                    | Data de nascimento do propriet√°rio                                                |
|                                 | CPF                                                   | Cadastro de Pessoa F√≠sica do propriet√°rio                                         |
|                                 | RG                                                    | Registro Geral do propriet√°rio                                                    |
|                                 | Nacionalidade                                         | Nacionalidade do propriet√°rio                                                     |
|                                 | Estado civil                                          | Estado civil do propriet√°rio                                                      |
| **Comprovante de resid√™ncia:**  | Conta de √°gua                                         | Comprovante de resid√™ncia - √°gua                                                 |
|                                 | Conta de luz                                          | Comprovante de resid√™ncia - luz                                                  |
|                                 | Conta de g√°s                                          | Comprovante de resid√™ncia - g√°s                                                  |
| **IPTU:**                       | Comprovante de pagamento do IPTU                      | Comprovante de pagamento do Imposto sobre a Propriedade Territorial Urbana        |
| **√înus reais:**                 | Comprovante de √¥nus reais                             | Documento que comprova √¥nus reais                                                |
| **Planta topogr√°fica do lote:** | Documento que representa a forma e as dimens√µes do lote | Planta topogr√°fica do lote                                                    |
| **Planta arquitet√¥nica do im√≥vel:** | Documento que representa a distribui√ß√£o interna do im√≥vel | Planta arquitet√¥nica do im√≥vel                                              |
| **Planta de zoneamento:**       | Documento que representa a divis√£o de uma √°rea urbana em zonas | Planta de zoneamento                                                         |
| **Escritura:**                  | Escritura                                             | Documento p√∫blico que registra a transfer√™ncia de propriedade de um im√≥vel        |
| **Fotos do im√≥vel:**            | Fotos do im√≥vel                                       | Fotos do im√≥vel para ilustrar e facilitar a identifica√ß√£o do im√≥vel                |

## Recursos Principais

O projeto apresenta um contrato Solidity que serve como um Marketplace descentralizado para tokens n√£o fung√≠veis (NFTs), oferecendo uma s√©rie de recursos robustos:

1. **Cria√ß√£o Descentralizada de NFTs:**
   - Os usu√°rios podem criar facilmente seus pr√≥prios NFTs de forma descentralizada, proporcionando autonomia na gera√ß√£o de conte√∫do exclusivo.

2. **Negocia√ß√£o compra e venda de NFTs:**
   - Facilita a negocia√ß√£o peer-to-peer de NFTs, permitindo que os usu√°rios troquem ativos digitais de maneira segura e transparente.

3. **Leil√µes Descentralizados:**
   - Oferece a funcionalidade de criar leil√µes para NFTs, possibilitando aos usu√°rios aceitar lances em um ambiente descentralizado e transparente.

## Uso üõ†Ô∏è

### Screenshots



> [Mundo Digital](https://) - `Propriet√°rios`

![FORMULARIO ESCRITURA](https://github.com/ASPPIBRA-DAO/Imagens/blob/84bc56a7f478111c614bc730f10cb78e170ac303/Layout_app/Escritura/Formulario7.png)
<br />

> [Mundo Digital](https://) - `Localiza√ß√£o`

![FORMULARIO ESCRITURA](https://github.com/ASPPIBRA-DAO/Imagens/blob/4786522402a31fc1604dff9c72cf8a5d3926d850/Layout_app/Escritura/Localiza%C3%A7%C3%A3o.png)
<br />

> [Mundo Digital](https://) - `Prefeitura e Cart√≥rio`

![FORMULARIO ESCRITURA](https://github.com/ASPPIBRA-DAO/Imagens/blob/8308dbfcde8b0f09bf0694782b39b7f93322489c/Layout_app/Escritura/Prefeitura%20e%20Cartorio.png)
<br />

> [Mundo Digital](https://) - `Profissionais`

![FORMULARIO ESCRITURA](https://github.com/ASPPIBRA-DAO/Imagens/blob/8308dbfcde8b0f09bf0694782b39b7f93322489c/Layout_app/Escritura/Profissionais.png)
<br />

> [Mundo Digital](https://) - `Im√≥vel`

![FORMULARIO ESCRITURA](https://github.com/ASPPIBRA-DAO/Imagens/blob/4786522402a31fc1604dff9c72cf8a5d3926d850/Layout_app/Escritura/Imovel.png)
<br />

> [Mundo Digital](https://) - `Plano Arquitet√¥nico`
 
![FORMULARIO ESCRITURA](https://github.com/ASPPIBRA-DAO/Imagens/blob/4786522402a31fc1604dff9c72cf8a5d3926d850/Layout_app/Escritura/Plano%20Arquitetonico.png)
<br />

> [Mundo Digital](https://) - `Plano Topogr√°fico`

![FORMULARIO ESCRITURA](https://github.com/ASPPIBRA-DAO/Imagens/blob/4786522402a31fc1604dff9c72cf8a5d3926d850/Layout_app/Escritura/Plano%20Topografico.png)
<br />

> [Mundo Digital](https://) - `Plano de Zoneamneto`

![FORMULARIO ESCRITURA](https://github.com/ASPPIBRA-DAO/Imagens/blob/4786522402a31fc1604dff9c72cf8a5d3926d850/Layout_app/Escritura/Plano%20de%20Zoneamento.png)
<br />


# Mundo Digital (DWorld)
Presentation with description of the ERC721 and ERC1155 smart contract with its functions for nft marketplace.



## ABI, Address, and Verification

The abi contract is in `DigitalWorld.abi`. It is the abi of the implementation contract.
Interaction with DWorld is done at the proxy address at `0x00000000000000000000000000000000000`. To see
https://etherscan.io/token/0x0000000000000000000 for live on-chain details and the section on bytecode verification below.

## Contract specification

Digital World (DWorld) is an ERC721 and ERC 1155 token that is minted and burned centrally by ASPPIBRA-DAO,
representing the trusted party backing the token in US dollars. 

### ERC20 Token

DWorld's public interface is ERC721 and ERC1155 interface
specified by [EIP-20](https://github.com/ethereum/ercs/blob/master/ERCS/erc-1155.md).

#### Read Contract
- `name()`
- `symbol()`
- `decimals()`
- `totalSupply()`
- `balanceOf(address who)`
- `allowance(address owner, address spender)`
  
#### Write Contract
- `transfer(address to, uint256 value)`
- `approve(address spender, uint256 value)`
- `transferFrom(address from, address to, uint256 value)`

#### And the usual events.
- `event Transfer(address indexed from, address indexed to, uint256 value)`
- `event Approval(address indexed owner, address indexed spender, uint256 value)`

Typical interaction with the contract will use `transfer` to move the token as payment.
Additionally, a pattern involving `approve` and `transferFrom` can be used to allow another 
address to move tokens from your address to a third party without the need for the middleperson 
to custody the tokens, such as in the 0x protocol. 

#### Warning about ERC20 approve front-running

There is a well known gotcha involving the ERC20 `approve` method. The problem occurs when the owner decides
to change the allowance of a spender that already has an allowance. If the spender sends a `transferFrom` 
transaction at a similar time that the owner sends the new `approve` transaction
and the `transferFrom` by the spender goes through first, then the spender gets to use the 
original allowance, and also get approved for the intended new allowance.

The recommended mitigation in cases where the owner does not trust the spender is to
first set the allowance to zero before setting it to a new amount, checking that the 
allowance was not spent before sending the new approval transaction. Note, however, that any 
allowance change is subject to front-running, which is as simple as watching the 
mempool for certain transactions and then offering a higher gas price to get another 
transaction mined onto the blockchain more quickly.

### Controlling the NFT supply

The total supply of NFT is backed by fiat held in reserve at ASPPIBRA-DAO.
There is a single `supplyController` address that can mint and burn the token
based on the actual movement of cash in and out of the reserve based on
requests for the purchase and redemption of NFT.

The supply control interface includes methods to get the current address
of the supply controller, and events to monitor the change in supply of NFT.

- `supplyController()`

Supply Control Events

- `SupplyIncreased(address indexed to, uint256 value)`
- `SupplyDecreased(address indexed from, uint256 value)`
- `SupplyControllerSet(address indexed oldSupplyController, address indexed newSupplyController)`

### Pausing the contract

In the event of a critical security threat, ASPPIBRA-DAO has the ability to pause transfers
and approvals of the NFT token. The ability to pause is controlled by a single `owner` role,
 following OpenZeppelin's
[Ownable](https://github.com/OpenZeppelin/openzeppelin-solidity/blob/5daaf60d11ee2075260d0f3adfb22b1c536db983/contracts/ownership/Ownable.sol). 
The simple model for pausing transfers following OpenZeppelin's
[Pausable](https://github.com/OpenZeppelin/openzeppelin-solidity/blob/5daaf60d11ee2075260d0f3adfb22b1c536db983/contracts/lifecycle/Pausable.sol).

### Asset protection function

As required by our regulators, we have introduced an asset protection function to freeze or seize the assets of a criminal party when required by law, including by court order or other legal process.

The `assetProtectionRole` can freeze and unfreeze an NFT from any address on the chain.
You can also clear the balance of an address after it has been frozen
to allow the competent authorities to confiscate the collateral.

Freezing is something that ASPPIBRA-DAO will not do on its own,
and as such, we expect it to happen extremely rarely. Frozen address list is available
in `isFrozen (who address)`.


### Upgradeability Proxy

To facilitate upgradeability on the immutable blockchain we follow a standard
two-contract delegation pattern: a proxy contract represents the token,
while all calls not involving upgrading the contract are delegated to an 
implementation contract. 

The delegation uses `delegatecall`, which runs the code of the implementation contract
_in the context of the proxy storage_. This way the implementation pointer can
be changed to a different implementation contract while still keeping the same
data and DWorld contract address, which are really for the proxy contract.

The proxy used here is AdminUpgradeabilityProxy from ZeppelinOS.

## Upgrade Process

The implementation contract is only used for the logic of the non-admin methods.
A new implementation contract can be set by calling `upgradeTo()` or `upgradeToAndCall()` on the proxy,
where the latter is used for upgrades requiring a new initialization or data migration so that
it can all be done in one transaction. You must first deploy a copy of the new implementation
contract, which is automatically paused by its constructor to help avoid accidental calls directly
to the proxy contract.

## Bytecode verification

The proxy contract and implementation contracts are verified on etherscan at the following links:

Because the implementation address in the proxy is a private variable, 
verifying that this is the proxy being used requires reading contract
storage directly. This can be done using a mainnet node, such as infura,
by pasting the network address in `truffle-config.js` and running 

`truffle exec ./getImplementationAddress.js --network mainnet`

## Contract Tests

https://testnet.bscscan.com/token/0xb1d4a44ce8aa5e2eb2e23d7002693918f4f36c72

https://testnet.bscscan.com/address/0x86a98eb31721f997Fed65f2aEa535DD428dCe193#code

#### NFT
https://testnet.bscscan.com/address/0x4d92829620a7dEf47Ba60f9E68eAC1e1683A87fF#code
https://testnet.bscscan.com/address/0x2cfF281E01d58143089997AC5A495D85d89D1bB2#code

#### Contract
https://testnet.bscscan.com/address/0x3fda2E660DC06D3eCc2cC5a797af7eD8De89f2f4#code
https://testnet.bscscan.com/address/0x7FF0884888EA59c6a02C2D8a6844A27235BA78F5#code

As a first step run the initial setup

`make setup`

Next to run the smart contract tests, in another terminal, start ganache-cli

`make ganache`

Then in the original terminal where setup was executed, run

`make test-contracts`

You can also run `make test-contracts-coverage` to see a coverage report.



## Contribui√ß√µes ü§ù

### Relatando Problemas üêõ

Se encontrar algum problema ou bug, sinta-se √† vontade para abrir uma issue em nosso reposit√≥rio. Certifique-se de fornecer detalhes sobre o problema encontrado, incluindo passos para reprodu√ß√£o, mensagens de erro e informa√ß√µes relevantes para facilitar a corre√ß√£o.

### Propondo Melhorias üöÄ

Voc√™ tem ideias para melhorar o contrato inteligente ou a experi√™ncia do usu√°rio no Mundo Digital Marketplace? Abra uma issue para discutir suas propostas. Estamos abertos a sugest√µes para novos recursos, aprimoramentos de desempenho e otimiza√ß√µes gerais.

### Contribuindo com C√≥digo üíª

Se deseja contribuir diretamente com c√≥digo, siga estas etapas:

1. **Fork do Reposit√≥rio:** Fa√ßa um fork do nosso reposit√≥rio para sua pr√≥pria conta.
2. **Cria√ß√£o de Branch:** Crie um branch para trabalhar na sua contribui√ß√£o.
3. **Desenvolvimento:** Implemente suas melhorias ou corre√ß√µes.
4. **Testes:** Certifique-se de testar suas altera√ß√µes.
5. **Solicita√ß√£o de Pull (PR):** Abra uma PR descrevendo suas altera√ß√µes e explicando os benef√≠cios.
6. **Revis√£o:** Aguarde a revis√£o da sua PR por nossos mantenedores.

### Documenta√ß√£o üìö

Contribui√ß√µes para a documenta√ß√£o tamb√©m s√£o valorizadas. Se voc√™ identificar √°reas que precisam de mais clareza ou quiser adicionar informa√ß√µes √∫teis, sinta-se √† vontade para enviar propostas de altera√ß√£o na documenta√ß√£o.

Agradecemos antecipadamente por seu suporte e contribui√ß√µes para tornar o contrato inteligente do Mundo Digital ainda melhor. Juntos, podemos criar uma plataforma mais robusta e eficiente.

## Licen√ßa üìÑ

Este projeto √© protegido pelos termos do modelo de licen√ßa de Software Propriet√°rio. Consulte o arquivo [**Licen√ßa**](https://github.com/ASPPIBRA-DAO/DIGITAL_WORLD_REAL_ESTATE_MARKET/blob/a145c7c2e2a1fa311bb814ed8ed9b1819a20631d/LICENSE.md) para obter detalhes.
